function FormatNumberBy3(b,c,d){if(2==arguments.length&&(d=","),1==arguments.length&&(d=",",c="."),b=b.toString(),a=b.split(c),x=a[0],y=a[1],z="","undefined"!=typeof x){for(i=x.length-1;i>=0;i--)z+=x.charAt(i);for(z=z.replace(/(\d{3})/g,"$1"+d),z.slice(-d.length)==d&&(z=z.slice(0,-d.length)),x="",i=z.length-1;i>=0;i--)x+=z.charAt(i);"undefined"!=typeof y&&y.length>0&&(x+=c+y)}return x}$(document).ready(function(){function a(a,c){{var d=a.result,e=d.left_days>=1?d.left_days:0,f=d.left_hours>=1?d.left_hours:0,g=d.left_mins>=1?d.left_mins:0;d.raised_monthly}$(".goal").text(d.goal_formatted),$(".onetimetotal").text(FormatNumberBy3(d.raised_onetime)),$(".percentage").text(d.percentage),$(".count").text(d.people),$(".remaining").text(d.remaining_monthly),$(".progress-bar").css("width",d.percentage_monthly+"%"),$(".progress-bar").attr("aria-valuenow",d.percentage_monthly),$(".progress-bar").attr("aria-valuemin",0),$(".progress-bar").attr("aria-valuemax",d.goal),e>1?($(".days").html(e),$("i.days-left").html("days left")):1==e&&($(".days").html(e),$("i.days-left").html("day left")),0===e&&($(".hours").html('<span class="hour"">'+f+"</span> hours, "),$(".minutes").html('<span class="minute">'+g+"</span> minutes remaining.")),"once"==c?($({countNum:$("span.amount").text()}).animate({countNum:d.raised_monthly},{duration:4e3,easing:"linear",step:function(){$(".amount").text(FormatNumberBy3(Math.floor(this.countNum),".",","))}}),$.each(d.contributors,function(a,b){$("ul.contributor-list").append('<li id="'+a+'">'+b.name+", "+b.city+", "+b.state+"</li>")}),d.left_days<1&&d.left_hours<1&&d.left_mins<1?$("#campaign-end").html('<p class="alert alert-warning">The campaign is now over but you can still join The Tyee and help bring more great independent journalism to national issues. Thanks to all who signed up.</p>'):0===d.left_days&&$("#campaign-end").html('<p class="alert alert-warning">Campaign ends tonight at midnight!</p>')):"update"===c&&($(".amount").text(FormatNumberBy3(d.raised_monthly,".",",")),$(".contributor-list li:first").slideUp(function(){$(this).appendTo($(".contributor-list")).slideDown()}),d.percentage_monthly>99.99&&(clearInterval(b),$(".progress-bar").html('<span class="complete-msg">We did it!</span>'),$(".remaining").text("$0")))}url=App.widgeturi+"/progress.json?monthlyonly=0&multiplier=12&date_end=2016-05-30&goal=25000&date_start=2016-05-16",$.getJSON(url,function(b){a(b,"once")});var b=setInterval(function(){$.getJSON(url,function(b){a(b,"update")})},5e3);$.getJSON(App.widgeturi+"/builderlist.json?monthlyonly=0&date_start=2016-05-16&cb=?",function(a){var b=a.result,c=b.builderlist,d=c.pop(),e=b.count;$("#builder-count").text(FormatNumberBy3(e,".",",")),$.each(c,function(a,b){$("#builder-list ul").append('<li id="'+a+'">'+b.first_name+" "+b.last_name+"</li>")}),$("#builder-list ul").append('<li class="last"> and '+d.first_name+" "+d.last_name+"</li>")})});